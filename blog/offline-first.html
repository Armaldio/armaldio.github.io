<html>
<head>
    <title></title>
    <link rel="stylesheet" href="../semantic/dist/semantic.min.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../theme/dark.css">

    <link rel="stylesheet" href="highlight/styles/monokai.css">
</head>
<body>

<div class="ui container">

    <br>
    <div class="ui segment">

        <p>During this week, I had to develop a Progressive Web App (PWA)</p>
<p>Here, I will let you know about some awesome pieces of technology that everyone should use to make the web better.<br>I will not go on the topic “Native is <strong>faster</strong>, <strong>cleaner</strong>, <strong>better</strong>, …”, I will just expose my point of view</p>
<p>When writing an app, sometimes you don’t know about who will use it. So you ask yourself the question <strong>“For which platform should I design my app ?”</strong></p>
<p>With web, you don’t have to ask this question. <strong>Every</strong> popular device have a <strong>browser</strong> (even TV !)<br>You write the app once, and you can use it everywhere, than is very handy (though, you have to make the code/UI “<strong>responsive</strong>“, so that it adapts to the platform it’s on)<br>So for my app, I chose not to write a regular web app, but something called a <strong>Progressive Web App</strong><br>The app could be used either on a regular browser or on a mobile device</p>
<h2 class="ui header" id="progressive-web-app">Progressive Web App</h2>
<p>According to Google, a PWA is <strong>Reliable</strong>, <strong>Fast</strong> and <strong>Engaging</strong><br>But what does that means ?</p>
<p>You have three types of connection :</p>
<ul>
<li>Connected</li>
<li>Offline</li>
<li>Uncertain</li>
</ul>
<p>With a normal app, fetching data from the browser, when you are connected, it’s ok. But when you are not, you just have the browser telling you that you have no network or even worse, infinite loading and white page</p>
<p>With PWA, things are different. Here are some features :</p>
<ul>
<li>Progressive - Work for every user, regardless of browser choice because they’re built with progressive enhancement as a core tenet.</li>
<li>Responsive - Fit any form factor: desktop, mobile, tablet, or forms yet to emerge.</li>
<li>Connectivity independent - Service workers allow work offline, or on low quality networks.</li>
<li>App-like - Feel like an app to the user with app-style interactions and navigation.</li>
<li>Fresh - Always up-to-date thanks to the service worker update process.</li>
<li>Safe - Served via HTTPS to prevent snooping and ensure content hasn’t been tampered with.</li>
<li>Discoverable - Are identifiable as “applications” thanks to W3C manifests[6] and service worker registration        scope allowing search engines to find them.</li>
<li>Re-engageable - Make re-engagement easy through features like push notifications.</li>
<li>Installable - Allow users to “keep” apps they find most useful on their home screen without the hassle of an app        store.</li>
<li>Linkable - Easily shared via a URL and do not require complex installation.</li>
</ul>
<p>(Wikipedia)</p>
<p><a href='https://www.youtube.com/watch?v=xkme8WFyoXw'><img class='ui fluid rounded image' alt='Add to homescreen gif' src='https://images.frandroid.com/wp-content/uploads/2017/02/progressive-web-app-pwa.gif'></a></p>
<p>A very interesting part is that you can cache pages (using Service Workers) and datas (using Database) wich means <strong>saving datas on the user device</strong> to be able to serve them when user is offline. But <strong>not only</strong> !</p>
<p>This is the principle of <strong>offline first</strong></p>
<p><strong>First time</strong> : User connect to website &rarr; Website is served from server &rarr; Website is cached</p>
<p><strong>Second time</strong> : User connect to website &rarr; Website load instantly from cache &rarr; Website check for new version &rarr; Website cache new version &rarr; Website ask the user if he wants to reload the page</p>
<p><strong>Third time</strong> : User connect to website &rarr; New version of the app is served from cache &rarr; Website check for new version &rarr; and the loop continues…</p>
<p>And this system works whatever the connectivity of the user is because the <strong>offline version</strong> is served first.</p>
<h2 class="ui header" id="service-worker">Service Worker</h2>
<p>That’s really nice but how do you achieve this kind of cache system ?<br>Thanks to <strong>Service workers</strong><br>They are small pieces of code that <strong>interceps</strong> browser requests</p>
<p><img class="ui fluid rounded image" src="https://infrequently.org/14/html5devconf_oct/images/sw_model.png" alt="Service worker image"></p>
<p>Not going too much into details, service workers have <strong>event</strong> like <strong>fetch</strong>, <strong>install</strong> or <strong>activate</strong><br>On service worker installation, you can cache all website data<br>Then on fetch event (all single request goes to this function) you can do your check :</p>
<pre><code class="lang-js">on(&#39;fetch&#39;, page =&gt; {
    if (isCached(page)
        return (cachedPage);
    else
        return (pageFromServer);
}
</code></pre>
<p>You can even do more advanced stuff like, if the page isn’t in the cache while fetching it from the server then cache it</p>
<h2 class="ui header" id="database">Database</h2>
<p>Now, you know how to cache webpages and how to make an offline app<br>But what about data that you fetch from external websites like <strong>Firebase</strong> ?<br>It works the same way but with database<br>There are several libraries that can help you achieve what you want, but the default one is <strong>indexedDB</strong><br>You just have to open your database and get datas inside it :</p>
<pre><code class="lang-js">var request = window.indexedDB.open(&quot;MyTestDatabase&quot;, 3);

request.onsuccess = function(event) {
  db = event.target.result;
};
</code></pre>
<p>Now you can use your offline datas and then (if internet connections) fetch new datas, populate again with the new one and also cache them to the database</p>
<h2 class="ui header" id="conclusion">Conclusion</h2>
<p>I hope PWA have a bright future because I think it’s composed of some awesome functionalities<br>In a world where everyone is on his phone, everywhere in the world, and moving fast an internet connection is not always available and it’s very frustrating to not get the content you asked for.<br>Also performance in web is a great debate. If it’s true that going to a browser, search for the website you want then wait for it to load if slower than a native app experience, it tends to be false with progressive web apps since browsers are more and more quick and powerful and cache does a great job in speed improvement.</p>
<h2 class="ui header" id="references-and-links">References and links</h2>
<p>Indexed db : <a href="https://developer.mozilla.org/fr/docs/Web/API/API_IndexedDB/Using_IndexedDB">https://developer.mozilla.org/fr/docs/Web/API/API_IndexedDB/Using_IndexedDB</a></p>
<p>Google I/O 2016 : <a href="https://www.youtube.com/watch?v=cmGr0RszHc8">https://www.youtube.com/watch?v=cmGr0RszHc8</a></p>
<p>Jake Archibald “Service Worker fanatic” :</p>
<ul>
<li>Twitter : <a href="https://twitter.com/jaffathecake">https://twitter.com/jaffathecake</a></li>
<li>Github : <a href="https://github.com/jakearchibald">https://github.com/jakearchibald</a></li>
</ul>
<p>Free Udemy course about PWA : <a href="https://www.udacity.com/course/intro-to-progressive-web-apps--ud811">https://www.udacity.com/course/intro-to-progressive-web-apps–ud811</a></p>
<p>Service worker introduction : <a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers">https://developers.google.com/web/fundamentals/getting-started/primers/service-workers</a></p>
<p>Awesome Service Workers : <a href="https://github.com/TalAter/awesome-service-workers">https://github.com/TalAter/awesome-service-workers</a></p>
<p>Awesome PWA : <a href="https://github.com/hemanth/awesome-pwa">https://github.com/hemanth/awesome-pwa</a></p>


    </div>
    <br>


</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../semantic/dist/semantic.min.js"></script>

<script src="highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>